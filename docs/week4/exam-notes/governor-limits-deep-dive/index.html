<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-week4/exam-notes/governor-limits-deep-dive" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Week 4: Governor Limits Deep Dive | Salesforce Platform Developer I</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lehoaibao130497.github.io/learn-salesforce/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lehoaibao130497.github.io/learn-salesforce/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lehoaibao130497.github.io/learn-salesforce/docs/week4/exam-notes/governor-limits-deep-dive"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Week 4: Governor Limits Deep Dive | Salesforce Platform Developer I"><meta data-rh="true" name="description" content="üìö Understanding Governor Limits"><meta data-rh="true" property="og:description" content="üìö Understanding Governor Limits"><link data-rh="true" rel="icon" href="/learn-salesforce/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lehoaibao130497.github.io/learn-salesforce/docs/week4/exam-notes/governor-limits-deep-dive"><link data-rh="true" rel="alternate" href="https://lehoaibao130497.github.io/learn-salesforce/docs/week4/exam-notes/governor-limits-deep-dive" hreflang="en"><link data-rh="true" rel="alternate" href="https://lehoaibao130497.github.io/learn-salesforce/docs/week4/exam-notes/governor-limits-deep-dive" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Week 4: Governor Limits Deep Dive","item":"https://lehoaibao130497.github.io/learn-salesforce/docs/week4/exam-notes/governor-limits-deep-dive"}]}</script><link rel="alternate" type="application/rss+xml" href="/learn-salesforce/blog/rss.xml" title="Salesforce Platform Developer I RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/learn-salesforce/blog/atom.xml" title="Salesforce Platform Developer I Atom Feed"><link rel="stylesheet" href="/learn-salesforce/assets/css/styles.1a7b775f.css">
<script src="/learn-salesforce/assets/js/runtime~main.a239664c.js" defer="defer"></script>
<script src="/learn-salesforce/assets/js/main.66d615f4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/learn-salesforce/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/learn-salesforce/"><div class="navbar__logo"><img src="/learn-salesforce/img/logo.svg" alt="Salesforce Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/learn-salesforce/img/logo.svg" alt="Salesforce Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Salesforce Dev I</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/learn-salesforce/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/learn-salesforce/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/lehoaibao130497/learn-salesforce" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-salesforce/docs/intro"><span title="üöÄ Getting Started" class="categoryLinkLabel_W154">üöÄ Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-salesforce/docs/QUICK_REFERENCE"><span title="üìö Quick Reference" class="categoryLinkLabel_W154">üìö Quick Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-salesforce/docs/week1/"><span title="üìÖ Week 1: Admin &amp; Flow" class="categoryLinkLabel_W154">üìÖ Week 1: Admin &amp; Flow</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-salesforce/docs/week2/"><span title="üíª Week 2: Apex &amp; SOQL" class="categoryLinkLabel_W154">üíª Week 2: Apex &amp; SOQL</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-salesforce/docs/week3/"><span title="‚ö° Week 3: LWC" class="categoryLinkLabel_W154">‚ö° Week 3: LWC</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/learn-salesforce/docs/week4/"><span title="üéØ Week 4: Exam Prep" class="categoryLinkLabel_W154">üéØ Week 4: Exam Prep</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn-salesforce/docs/week4/"><span title="Week 4: Exam Prep &amp; AI Integration" class="linkLabel_WmDU">Week 4: Exam Prep &amp; AI Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn-salesforce/docs/week4/ai-integration"><span title="Week 4: AI Integration with Prompt Builder" class="linkLabel_WmDU">Week 4: AI Integration with Prompt Builder</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn-salesforce/docs/week4/exam-notes/detailed-exam-guide"><span title="Week 4: Detailed Exam Guide" class="linkLabel_WmDU">Week 4: Detailed Exam Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/learn-salesforce/docs/week4/exam-notes/governor-limits-deep-dive"><span title="Week 4: Governor Limits Deep Dive" class="linkLabel_WmDU">Week 4: Governor Limits Deep Dive</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn-salesforce/docs/week4/practice-questions/strategies"><span title="Week 4: Practice Questions Strategy" class="linkLabel_WmDU">Week 4: Practice Questions Strategy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn-salesforce/docs/week4/ai-prompts/study-prompts"><span title="Week 4: AI Study Prompts" class="linkLabel_WmDU">Week 4: AI Study Prompts</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/learn-salesforce/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">üéØ Week 4: Exam Prep</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Week 4: Governor Limits Deep Dive</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Week 4: Governor Limits Deep Dive</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-understanding-governor-limits">üìö Understanding Governor Limits<a href="#-understanding-governor-limits" class="hash-link" aria-label="Direct link to üìö Understanding Governor Limits" title="Direct link to üìö Understanding Governor Limits" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-are-governor-limits">What Are Governor Limits?<a href="#what-are-governor-limits" class="hash-link" aria-label="Direct link to What Are Governor Limits?" title="Direct link to What Are Governor Limits?" translate="no">‚Äã</a></h3>
<p>Governor limits are runtime limits enforced by Salesforce to ensure efficient resource usage in the multi-tenant environment. These limits prevent any single org from consuming too many resources and affecting other orgs.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-do-limits-exist">Why Do Limits Exist?<a href="#why-do-limits-exist" class="hash-link" aria-label="Direct link to Why Do Limits Exist?" title="Direct link to Why Do Limits Exist?" translate="no">‚Äã</a></h3>
<ol>
<li class=""><strong>Multi-tenant Architecture:</strong> Shared resources require fair allocation</li>
<li class=""><strong>Performance:</strong> Prevent slow operations</li>
<li class=""><strong>Reliability:</strong> Ensure system stability</li>
<li class=""><strong>Scalability:</strong> Support many orgs efficiently</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-critical-limits-must-memorize">üî¢ Critical Limits (Must Memorize)<a href="#-critical-limits-must-memorize" class="hash-link" aria-label="Direct link to üî¢ Critical Limits (Must Memorize)" title="Direct link to üî¢ Critical Limits (Must Memorize)" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="soql--sosl-limits">SOQL &amp; SOSL Limits<a href="#soql--sosl-limits" class="hash-link" aria-label="Direct link to SOQL &amp; SOSL Limits" title="Direct link to SOQL &amp; SOSL Limits" translate="no">‚Äã</a></h3>
<table><thead><tr><th>Limit</th><th>Value</th><th>Context</th><th>Notes</th></tr></thead><tbody><tr><td><strong>SOQL Queries</strong></td><td>100</td><td>Per transaction</td><td>Synchronous &amp; asynchronous</td></tr><tr><td><strong>SOQL Rows Retrieved</strong></td><td>50,000</td><td>Per transaction</td><td>Total rows from all queries</td></tr><tr><td><strong>SOSL Queries</strong></td><td>20</td><td>Per transaction</td><td>Text search queries</td></tr><tr><td><strong>SOQL Query Locator Rows</strong></td><td>50,000</td><td>Per transaction</td><td>For query locator</td></tr><tr><td><strong>SOQL Aggregate Rows</strong></td><td>5,000</td><td>Per transaction</td><td>For aggregate queries</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="dml-limits">DML Limits<a href="#dml-limits" class="hash-link" aria-label="Direct link to DML Limits" title="Direct link to DML Limits" translate="no">‚Äã</a></h3>
<table><thead><tr><th>Limit</th><th>Value</th><th>Context</th><th>Notes</th></tr></thead><tbody><tr><td><strong>DML Statements</strong></td><td>150</td><td>Per transaction</td><td>insert, update, delete, etc.</td></tr><tr><td><strong>DML Rows</strong></td><td>10,000</td><td>Per transaction</td><td>Total rows affected</td></tr><tr><td><strong>Bulk DML Events</strong></td><td>10,000</td><td>Per transaction</td><td>For bulk API</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="system-limits">System Limits<a href="#system-limits" class="hash-link" aria-label="Direct link to System Limits" title="Direct link to System Limits" translate="no">‚Äã</a></h3>
<table><thead><tr><th>Limit</th><th>Value</th><th>Context</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Heap Size</strong></td><td>6 MB</td><td>Synchronous</td><td>12 MB for asynchronous</td></tr><tr><td><strong>CPU Time</strong></td><td>10,000 ms</td><td>Synchronous</td><td>60,000 ms asynchronous</td></tr><tr><td><strong>Future Calls</strong></td><td>50</td><td>Per transaction</td><td>@future methods</td></tr><tr><td><strong>Callouts (HTTP)</strong></td><td>100</td><td>Per transaction</td><td>External API calls</td></tr><tr><td><strong>Email Invocations</strong></td><td>10</td><td>Per transaction</td><td>SingleEmailMessage</td></tr><tr><td><strong>Queueable Jobs Added</strong></td><td>50</td><td>Per transaction</td><td>System.enqueueJob()</td></tr><tr><td><strong>Batch Apex Jobs</strong></td><td>5</td><td>Rolling 24h</td><td>Per org</td></tr><tr><td><strong>Future Jobs</strong></td><td>50</td><td>Rolling 24h</td><td>Per org</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="governor-limit-detection">Governor Limit Detection<a href="#governor-limit-detection" class="hash-link" aria-label="Direct link to Governor Limit Detection" title="Direct link to Governor Limit Detection" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Check limits before operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (Limits.getLimitQueries() - Limits.getQueries() &lt; 5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.debug(&#x27;Approaching query limit!&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Check heap usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (Limits.getLimitHeapSize() - Limits.getHeapSize() &lt; 1024 * 1024) { // 1MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.debug(&#x27;Heap almost full!&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Check CPU time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (Limits.getLimitCpuTime() - Limits.getCpuTime() &lt; 1000) { // 1 second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.debug(&#x27;CPU time running low!&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-common-pitfalls--solutions">üö´ Common Pitfalls &amp; Solutions<a href="#-common-pitfalls--solutions" class="hash-link" aria-label="Direct link to üö´ Common Pitfalls &amp; Solutions" title="Direct link to üö´ Common Pitfalls &amp; Solutions" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pitfall-1-soql-inside-loops">Pitfall 1: SOQL Inside Loops<a href="#pitfall-1-soql-inside-loops" class="hash-link" aria-label="Direct link to Pitfall 1: SOQL Inside Loops" title="Direct link to Pitfall 1: SOQL Inside Loops" translate="no">‚Äã</a></h3>
<p><strong>Problem:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Will exceed 100 query limit with 200+ accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Query inside loop - BAD!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Contact&gt; contacts = [SELECT Id, FirstName, LastName </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               FROM Contact </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               WHERE AccountId = :acc.Id];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.debug(&#x27;Account &#x27; + acc.Name + &#x27; has &#x27; + contacts.size() + &#x27; contacts&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Solution - Bulkify:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Single query for all contacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Collect account IDs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set&lt;Id&gt; accountIds = new Set&lt;Id&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accountIds.add(acc.Id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Single query for all contacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;Id, List&lt;Contact&gt;&gt; contactsByAccount = new Map&lt;Id, List&lt;Contact&gt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Contact con : [SELECT Id, AccountId, FirstName, LastName </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     FROM Contact </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     WHERE AccountId IN :accountIds]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!contactsByAccount.containsKey(con.AccountId)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        contactsByAccount.put(con.AccountId, new List&lt;Contact&gt;());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contactsByAccount.get(con.AccountId).add(con);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Process contacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Contact&gt; contacts = contactsByAccount.get(acc.Id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Integer contactCount = (contacts != null) ? contacts.size() : 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.debug(&#x27;Account &#x27; + acc.Name + &#x27; has &#x27; + contactCount + &#x27; contacts&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Even Better - Use Parent-Child Query:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ BETTER - Use parent-child subquery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 (SELECT Id, FirstName, LastName </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  FROM Contacts) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          LIMIT 200];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.debug(&#x27;Account &#x27; + acc.Name + &#x27; has &#x27; + </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 acc.Contacts.size() + &#x27; contacts&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pitfall-2-dml-inside-loops">Pitfall 2: DML Inside Loops<a href="#pitfall-2-dml-inside-loops" class="hash-link" aria-label="Direct link to Pitfall 2: DML Inside Loops" title="Direct link to Pitfall 2: DML Inside Loops" translate="no">‚Äã</a></h3>
<p><strong>Problem:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Will exceed 150 DML limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account LIMIT 200];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // DML inside loop - BAD!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    acc.Name = acc.Name + &#x27; - Updated&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    update acc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Solution - Bulk DML:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Single DML statement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account LIMIT 200];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accountsToUpdate = new List&lt;Account&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    acc.Name = acc.Name + &#x27; - Updated&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accountsToUpdate.add(acc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Single DML statement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">update accountsToUpdate;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pitfall-3-not-using-limit-clause">Pitfall 3: Not Using LIMIT Clause<a href="#pitfall-3-not-using-limit-clause" class="hash-link" aria-label="Direct link to Pitfall 3: Not Using LIMIT Clause" title="Direct link to Pitfall 3: Not Using LIMIT Clause" translate="no">‚Äã</a></h3>
<p><strong>Problem:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Could retrieve 50,000+ rows and exceed heap limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, Description </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          WHERE Industry = &#x27;Technology&#x27;];</span><br></span></code></pre></div></div>
<p><strong>Solution - Always Use LIMIT:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Limit results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, Description </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          WHERE Industry = &#x27;Technology&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          LIMIT 100];</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pitfall-4-cpu-time-limit-exceeded">Pitfall 4: CPU Time Limit Exceeded<a href="#pitfall-4-cpu-time-limit-exceeded" class="hash-link" aria-label="Direct link to Pitfall 4: CPU Time Limit Exceeded" title="Direct link to Pitfall 4: CPU Time Limit Exceeded" translate="no">‚Äã</a></h3>
<p><strong>Problem:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Complex calculations in loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, AnnualRevenue FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Complex calculation - could exceed CPU time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (Integer i = 0; i &lt; 1000; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Decimal revenue = acc.AnnualRevenue * (1 + i * 0.01);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(revenue);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Solution - Optimize Calculations:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Optimize calculations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, AnnualRevenue FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Pre-calculate values or use formulas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Simplified calculation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Decimal growthFactor = 10.0; // Pre-calculated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Decimal revenue = acc.AnnualRevenue * growthFactor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.debug(revenue);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or move heavy processing to batchable</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pitfall-5-heap-size-limit-exceeded">Pitfall 5: Heap Size Limit Exceeded<a href="#pitfall-5-heap-size-limit-exceeded" class="hash-link" aria-label="Direct link to Pitfall 5: Heap Size Limit Exceeded" title="Direct link to Pitfall 5: Heap Size Limit Exceeded" translate="no">‚Äã</a></h3>
<p><strong>Problem:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Loading too much data into heap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, Description, BillingStreet, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 BillingCity, BillingState, BillingPostalCode </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Account LIMIT 10000]; // Too many fields/rows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Additional large data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, Object&gt; largeData = new Map&lt;String, Object&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    largeData.put(acc.Id, acc); // Loading entire objects into map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Solution - Manage Heap Efficiently:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Select only needed fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, AnnualRevenue </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          LIMIT 100];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use only IDs in maps when possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set&lt;Id&gt; accountIds = new Set&lt;Id&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accountIds.add(acc.Id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Clear large objects when done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">largeData.clear(); // Free heap space</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pitfall-6-too-many-callouts">Pitfall 6: Too Many Callouts<a href="#pitfall-6-too-many-callouts" class="hash-link" aria-label="Direct link to Pitfall 6: Too Many Callouts" title="Direct link to Pitfall 6: Too Many Callouts" translate="no">‚Äã</a></h3>
<p><strong>Problem:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Callout inside loop will exceed 100 callout limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account LIMIT 200];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Callout inside loop - BAD!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExternalApiService.validateAccount(acc.Name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Solution - Batch or Optimize Callouts:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Batch API calls or use @future</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountValidationService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @future(callout=true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void validateAccounts(Set&lt;Id&gt; accountIds) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; accounts = [SELECT Id, Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  WHERE Id IN :accountIds];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Batch validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ExternalApiService.validateAccountsBatch(accounts);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or use Queueable for more control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AccountValidationQueueable implements Queueable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Set&lt;Id&gt; accountIds;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public AccountValidationQueueable(Set&lt;Id&gt; accountIds) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.accountIds = accountIds;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void execute(QueueableContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; accounts = [SELECT Id, Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  WHERE Id IN :accountIds LIMIT 100];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Process in batches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ExternalApiService.validateAccountsBatch(accounts);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Enqueue remaining</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (accountIds.size() &gt; 100) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.enqueueJob(new AccountValidationQueueable(accountIds));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-limits-by-transaction-type">üìä Limits by Transaction Type<a href="#-limits-by-transaction-type" class="hash-link" aria-label="Direct link to üìä Limits by Transaction Type" title="Direct link to üìä Limits by Transaction Type" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="synchronous-transactions">Synchronous Transactions<a href="#synchronous-transactions" class="hash-link" aria-label="Direct link to Synchronous Transactions" title="Direct link to Synchronous Transactions" translate="no">‚Äã</a></h3>
<p><strong>Trigger/Controller Execution:</strong></p>
<ul>
<li class="">Heap: 6 MB</li>
<li class="">CPU Time: 10,000 ms (10 seconds)</li>
<li class="">SOQL Queries: 100</li>
<li class="">DML Statements: 150</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SyncTransactionService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void processRecords(List&lt;Account&gt; accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // All operations count toward sync limits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Contact&gt; contacts = getContacts(accounts); // 1 query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        updateContacts(contacts); // 1 DML</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        createOpportunities(accounts); // 1 DML</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Total: 2 queries, 2 DML statements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="asynchronous-transactions">Asynchronous Transactions<a href="#asynchronous-transactions" class="hash-link" aria-label="Direct link to Asynchronous Transactions" title="Direct link to Asynchronous Transactions" translate="no">‚Äã</a></h3>
<p><strong>@future, Batchable, Queueable:</strong></p>
<ul>
<li class="">Heap: 12 MB (double)</li>
<li class="">CPU Time: 60,000 ms (60 seconds)</li>
<li class="">SOQL Queries: 100 (same)</li>
<li class="">DML Statements: 150 (same)</li>
</ul>
<p><strong>Example - @future:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public with sharing class AsyncService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @future</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void processAsync(List&lt;Id&gt; accountIds) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // More heap and CPU time available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; accounts = [SELECT Id, Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   WHERE Id IN :accountIds];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Can process more data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Complex processing allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Example - Batchable:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">global class AccountBatchProcessor implements Database.Batchable&lt;sObject&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    global Database.QueryLocator start(Database.BatchableContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Query up to 50 million records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Database.getQueryLocator([SELECT Id, Name FROM Account]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    global void execute(Database.BatchableContext context, List&lt;Account&gt; scope) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Process in chunks of 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (Account acc : scope) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            acc.Name = acc.Name + &#x27; - Processed&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        update scope; // 1 DML per batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    global void finish(Database.BatchableContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Final processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-checking-limits-programmatically">üîç Checking Limits Programmatically<a href="#-checking-limits-programmatically" class="hash-link" aria-label="Direct link to üîç Checking Limits Programmatically" title="Direct link to üîç Checking Limits Programmatically" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="limit-methods">Limit Methods<a href="#limit-methods" class="hash-link" aria-label="Direct link to Limit Methods" title="Direct link to Limit Methods" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class LimitChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void checkBeforeOperation() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Query limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;Queries used: &#x27; + Limits.getQueries() + &#x27;/&#x27; + Limits.getLimitQueries());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;Queries remaining: &#x27; + (Limits.getLimitQueries() - Limits.getQueries()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // SOQL rows limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;SOQL rows used: &#x27; + Limits.getQueryRows() + &#x27;/&#x27; + Limits.getLimitQueryRows());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // DML limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;DML used: &#x27; + Limits.getDmlStatements() + &#x27;/&#x27; + Limits.getLimitDmlStatements());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Heap limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;Heap used: &#x27; + Limits.getHeapSize() + &#x27;/&#x27; + Limits.getLimitHeapSize());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // CPU time limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;CPU used: &#x27; + Limits.getCpuTime() + &#x27;/&#x27; + Limits.getLimitCpuTime());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Future calls limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;Future used: &#x27; + Limits.getFutureCalls() + &#x27;/&#x27; + Limits.getLimitFutureCalls());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Callouts limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.debug(&#x27;Callouts used: &#x27; + Limits.getCallouts() + &#x27;/&#x27; + Limits.getLimitCallouts());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="practical-example---safe-query-execution">Practical Example - Safe Query Execution<a href="#practical-example---safe-query-execution" class="hash-link" aria-label="Direct link to Practical Example - Safe Query Execution" title="Direct link to Practical Example - Safe Query Execution" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public with sharing class SafeQueryService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static List&lt;Account&gt; getAccountsSafely(Integer batchSize) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Check query limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Integer queriesUsed = Limits.getQueries();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Integer queriesRemaining = Limits.getLimitQueries() - queriesUsed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (queriesRemaining &lt; 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new LimitException(&#x27;No query limit remaining&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Check row limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Integer rowsUsed = Limits.getQueryRows();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Integer rowsRemaining = Limits.getLimitQueryRows() - rowsUsed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (batchSize &gt; rowsRemaining) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.debug(&#x27;Reducing batch size from &#x27; + batchSize + &#x27; to &#x27; + rowsRemaining);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            batchSize = rowsRemaining;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Execute query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return [SELECT Id, Name FROM Account LIMIT :batchSize];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class LimitException extends Exception {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-best-practices">üéØ Best Practices<a href="#-best-practices" class="hash-link" aria-label="Direct link to üéØ Best Practices" title="Direct link to üéØ Best Practices" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-bulkify-all-operations">1. Bulkify All Operations<a href="#1-bulkify-all-operations" class="hash-link" aria-label="Direct link to 1. Bulkify All Operations" title="Direct link to 1. Bulkify All Operations" translate="no">‚Äã</a></h3>
<p><strong>Always:</strong></p>
<ul>
<li class="">Query outside loops</li>
<li class="">DML outside loops</li>
<li class="">Process records in bulk</li>
</ul>
<p><strong>Never:</strong></p>
<ul>
<li class="">SOQL inside loops</li>
<li class="">DML inside loops</li>
<li class="">Callouts inside loops</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-select-only-needed-fields">2. Select Only Needed Fields<a href="#2-select-only-needed-fields" class="hash-link" aria-label="Direct link to 2. Select Only Needed Fields" title="Direct link to 2. Select Only Needed Fields" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Selects all fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id FROM Account]; // Still fetches Name, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Explicit field list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account];</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-use-efficient-query-patterns">3. Use Efficient Query Patterns<a href="#3-use-efficient-query-patterns" class="hash-link" aria-label="Direct link to 3. Use Efficient Query Patterns" title="Direct link to 3. Use Efficient Query Patterns" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Parent-child subquery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 (SELECT Id, FirstName, LastName FROM Contacts) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Relationship query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Contact&gt; contacts = [SELECT Id, FirstName, LastName, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Account.Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Contact];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use bind variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          WHERE Industry = :selectedIndustry];</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-optimize-loops">4. Optimize Loops<a href="#4-optimize-loops" class="hash-link" aria-label="Direct link to 4. Optimize Loops" title="Direct link to 4. Optimize Loops" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - Nested loops O(n¬≤)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc1 : accounts1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (Account acc2 : accounts2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (acc1.Id == acc2.Id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Match found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Map-based O(n)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;Id, Account&gt; accounts2Map = new Map&lt;Id, Account&gt;(accounts2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc1 : accounts1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (accounts2Map.containsKey(acc1.Id)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Match found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-use-asynchronous-processing">5. Use Asynchronous Processing<a href="#5-use-asynchronous-processing" class="hash-link" aria-label="Direct link to 5. Use Asynchronous Processing" title="Direct link to 5. Use Asynchronous Processing" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Move heavy processing to async</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@future</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static void processHeavyData() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Can use 12 MB heap and 60s CPU time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use batchable for large volumes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">global class DataProcessor implements Database.Batchable&lt;sObject&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Process up to 50M records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use queueable for chaining</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ChainProcessor implements Queueable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void execute(QueueableContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Process and chain to next job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.enqueueJob(new ChainProcessor());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-clear-large-objects">6. Clear Large Objects<a href="#6-clear-large-objects" class="hash-link" aria-label="Direct link to 6. Clear Large Objects" title="Direct link to 6. Clear Large Objects" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Clear large collections when done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; largeList = [SELECT Id, Name FROM Account LIMIT 10000];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Process data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processAccounts(largeList);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Clear to free heap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">largeList = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Clear map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;Id, Account&gt; largeMap = new Map&lt;Id, Account&gt;(largeList);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use map...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">largeMap.clear(); // Free heap</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-use-efficient-data-structures">7. Use Efficient Data Structures<a href="#7-use-efficient-data-structures" class="hash-link" aria-label="Direct link to 7. Use Efficient Data Structures" title="Direct link to 7. Use Efficient Data Structures" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå BAD - List for lookups O(n)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Account searchAccount = [SELECT Id FROM Account LIMIT 1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Boolean found = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (acc.Id == searchAccount.Id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        found = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ GOOD - Set/Map for lookups O(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set&lt;Id&gt; accountIds = new Set&lt;Id&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accountIds.add(acc.Id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Boolean found = accountIds.contains(searchAccount.Id);</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-testing-governor-limits">üß™ Testing Governor Limits<a href="#-testing-governor-limits" class="hash-link" aria-label="Direct link to üß™ Testing Governor Limits" title="Direct link to üß™ Testing Governor Limits" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-limits-in-test-context">Test Limits in Test Context<a href="#test-limits-in-test-context" class="hash-link" aria-label="Direct link to Test Limits in Test Context" title="Direct link to Test Limits in Test Context" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@isTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private class LimitTesting {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @isTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static void testQueryLimit() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Test.startTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In test, limits are higher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Test limits are separate from production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; accounts = new List&lt;Account&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (Integer i = 0; i &lt; 200; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            accounts.add(new Account(Name = &#x27;Test &#x27; + i));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        insert accounts;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Query in test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; queried = [SELECT Id FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.assertEquals(200, queried.size());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Test.stopTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-limitsgetlimitqueries">Using Limits.getLimitQueries()<a href="#using-limitsgetlimitqueries" class="hash-link" aria-label="Direct link to Using Limits.getLimitQueries()" title="Direct link to Using Limits.getLimitQueries()" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@isTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private class LimitVerification {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @isTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static void verifyQueryUsage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Test.startTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Execute code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account LIMIT 10];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Verify query count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.assertEquals(1, Limits.getQueries());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.assert(Limits.getQueries() &lt; Limits.getLimitQueries());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Test.stopTest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-quick-reference-cheat-sheet">üìã Quick Reference Cheat Sheet<a href="#-quick-reference-cheat-sheet" class="hash-link" aria-label="Direct link to üìã Quick Reference Cheat Sheet" title="Direct link to üìã Quick Reference Cheat Sheet" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="must-memorize-limits">Must-Memorize Limits<a href="#must-memorize-limits" class="hash-link" aria-label="Direct link to Must-Memorize Limits" title="Direct link to Must-Memorize Limits" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SOQL Queries:          100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SOQL Rows:            50,000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SOSL Queries:          20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DML Statements:        150</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DML Rows:             10,000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Heap (sync):           6 MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Heap (async):          12 MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU Time (sync):       10,000 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU Time (async):      60,000 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Future Calls:          50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Callouts:             100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Email Invocations:     10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Queueable Jobs:        50</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="limit-checking-methods">Limit Checking Methods<a href="#limit-checking-methods" class="hash-link" aria-label="Direct link to Limit Checking Methods" title="Direct link to Limit Checking Methods" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getQueries()           // Queries used</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getLimitQueries()      // Total queries allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getQueryRows()         // Rows retrieved</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getLimitQueryRows()    // Total rows allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getDmlStatements()     // DML used</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getLimitDmlStatements() // Total DML allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getHeapSize()          // Heap used</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getLimitHeapSize()     // Total heap allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getCpuTime()           // CPU used</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getLimitCpuTime()      // Total CPU allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getFutureCalls()       // Future used</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getLimitFutureCalls()  // Total future allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getCallouts()          // Callouts used</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Limits.getLimitCallouts()     // Total callouts allowed</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-anti-patterns">Common Anti-Patterns<a href="#common-anti-patterns" class="hash-link" aria-label="Direct link to Common Anti-Patterns" title="Direct link to Common Anti-Patterns" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå SOQL in loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Contact&gt; contacts = [SELECT Id FROM Contact WHERE AccountId = :acc.Id];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå DML in loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    acc.Name = &#x27;Updated&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    update acc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå Callout in loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExternalApi.validate(acc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚ùå No LIMIT clause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account];</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-patterns">Best Patterns<a href="#best-patterns" class="hash-link" aria-label="Direct link to Best Patterns" title="Direct link to Best Patterns" translate="no">‚Äã</a></h3>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ Bulkified queries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set&lt;Id&gt; accountIds = new Set&lt;Id&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accountIds.add(acc.Id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Contact&gt; contacts = [SELECT Id FROM Contact WHERE AccountId IN :accountIds];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ Bulkified DML</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accountsToUpdate = new List&lt;Account&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    acc.Name = &#x27;Updated&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accountsToUpdate.add(acc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">update accountsToUpdate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ Parent-child query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, (SELECT Id FROM Contacts) FROM Account];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ‚úÖ Always use LIMIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account LIMIT 100];</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-exam-scenarios">üéì Exam Scenarios<a href="#-exam-scenarios" class="hash-link" aria-label="Direct link to üéì Exam Scenarios" title="Direct link to üéì Exam Scenarios" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scenario-1-trigger-optimization">Scenario 1: Trigger Optimization<a href="#scenario-1-trigger-optimization" class="hash-link" aria-label="Direct link to Scenario 1: Trigger Optimization" title="Direct link to Scenario 1: Trigger Optimization" translate="no">‚Äã</a></h3>
<p><strong>Question:</strong> A trigger needs to update related contacts when an account is updated. What is the best approach to avoid governor limits?</p>
<p><strong>Answer:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">trigger AccountTrigger on Account (after update) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Collect account IDs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set&lt;Id&gt; accountIds = Trigger.newMap.keySet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Bulk query contacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Contact&gt; contacts = [SELECT Id, AccountId </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              FROM Contact </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              WHERE AccountId IN :accountIds];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update contacts in bulk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;Id, Account&gt; newAccounts = Trigger.newMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (Contact con : contacts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Account acc = newAccounts.get(con.AccountId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (acc.Industry == &#x27;Technology&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            con.Type = &#x27;Prospect&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Single DML</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    update contacts;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scenario-2-cpu-time-optimization">Scenario 2: CPU Time Optimization<a href="#scenario-2-cpu-time-optimization" class="hash-link" aria-label="Direct link to Scenario 2: CPU Time Optimization" title="Direct link to Scenario 2: CPU Time Optimization" translate="no">‚Äã</a></h3>
<p><strong>Question:</strong> A process is hitting CPU time limits with large data sets. How should it be optimized?</p>
<p><strong>Answer:</strong></p>
<ol>
<li class="">Move to asynchronous processing</li>
<li class="">Use batchable for large volumes</li>
<li class="">Optimize loops and calculations</li>
<li class="">Pre-calculate values</li>
</ol>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">global class LargeDataProcessor implements Database.Batchable&lt;sObject&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    global Database.QueryLocator start(Database.BatchableContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Database.getQueryLocator([SELECT Id, Data__c FROM Large_Object__c]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    global void execute(Database.BatchableContext context, List&lt;Large_Object__c&gt; scope) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Process in chunks (200 records)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Large_Object__c&gt; toUpdate = new List&lt;Large_Object__c&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Pre-calculate common values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Decimal multiplier = 1.15;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (Large_Object__c obj : scope) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Simple calculation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            obj.Processed_Value__c = obj.Data__c * multiplier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            toUpdate.add(obj);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Bulk DML</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        update toUpdate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    global void finish(Database.BatchableContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Finalize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scenario-3-callout-optimization">Scenario 3: Callout Optimization<a href="#scenario-3-callout-optimization" class="hash-link" aria-label="Direct link to Scenario 3: Callout Optimization" title="Direct link to Scenario 3: Callout Optimization" translate="no">‚Äã</a></h3>
<p><strong>Question:</strong> Need to validate 500 accounts against external API. How to avoid callout limit?</p>
<p><strong>Answer:</strong></p>
<div class="language-apex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-apex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ExternalValidationService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @future(callout=true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void validateAccounts(Set&lt;Id&gt; accountIds) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Batch validation - send all IDs in single call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; accounts = [SELECT Id, Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   FROM Account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   WHERE Id IN :accountIds];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Single callout for validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;Id, Boolean&gt; validationResults = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ExternalAPI.validateAccountsBatch(accounts);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Update validation status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Account&gt; toUpdate = new List&lt;Account&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (Account acc : accounts) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            acc.Validated__c = validationResults.get(acc.Id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            toUpdate.add(acc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        update toUpdate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-summary">üìö Summary<a href="#-summary" class="hash-link" aria-label="Direct link to üìö Summary" title="Direct link to üìö Summary" translate="no">‚Äã</a></h2>
<p><strong>Key Takeaways:</strong></p>
<ol>
<li class=""><strong>Memorize</strong> critical limits (100 queries, 150 DML, 6 MB heap, 10s CPU)</li>
<li class=""><strong>Bulkify</strong> all operations (no queries/DML in loops)</li>
<li class=""><strong>Check</strong> limits before critical operations</li>
<li class=""><strong>Optimize</strong> queries and data structures</li>
<li class=""><strong>Use async</strong> for heavy processing</li>
<li class=""><strong>Test</strong> with realistic data volumes</li>
</ol>
<p><strong>Exam Success:</strong></p>
<ul>
<li class="">Understand when limits are reached</li>
<li class="">Know how to avoid common pitfalls</li>
<li class="">Be able to optimize code to stay within limits</li>
<li class="">Recognize patterns that cause limit exceptions</li>
</ul>
<hr>
<p><strong>Next:</strong> <a class="" href="/learn-salesforce/docs/week4/ai-integration">AI Integration Guide</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/lehoaibao130497/learn-salesforce/tree/main/website/docs/docs/week4/exam-notes/governor-limits-deep-dive.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/learn-salesforce/docs/week4/exam-notes/detailed-exam-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Week 4: Detailed Exam Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/learn-salesforce/docs/week4/practice-questions/strategies"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Week 4: Practice Questions Strategy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-understanding-governor-limits" class="table-of-contents__link toc-highlight">üìö Understanding Governor Limits</a><ul><li><a href="#what-are-governor-limits" class="table-of-contents__link toc-highlight">What Are Governor Limits?</a></li><li><a href="#why-do-limits-exist" class="table-of-contents__link toc-highlight">Why Do Limits Exist?</a></li></ul></li><li><a href="#-critical-limits-must-memorize" class="table-of-contents__link toc-highlight">üî¢ Critical Limits (Must Memorize)</a><ul><li><a href="#soql--sosl-limits" class="table-of-contents__link toc-highlight">SOQL &amp; SOSL Limits</a></li><li><a href="#dml-limits" class="table-of-contents__link toc-highlight">DML Limits</a></li><li><a href="#system-limits" class="table-of-contents__link toc-highlight">System Limits</a></li><li><a href="#governor-limit-detection" class="table-of-contents__link toc-highlight">Governor Limit Detection</a></li></ul></li><li><a href="#-common-pitfalls--solutions" class="table-of-contents__link toc-highlight">üö´ Common Pitfalls &amp; Solutions</a><ul><li><a href="#pitfall-1-soql-inside-loops" class="table-of-contents__link toc-highlight">Pitfall 1: SOQL Inside Loops</a></li><li><a href="#pitfall-2-dml-inside-loops" class="table-of-contents__link toc-highlight">Pitfall 2: DML Inside Loops</a></li><li><a href="#pitfall-3-not-using-limit-clause" class="table-of-contents__link toc-highlight">Pitfall 3: Not Using LIMIT Clause</a></li><li><a href="#pitfall-4-cpu-time-limit-exceeded" class="table-of-contents__link toc-highlight">Pitfall 4: CPU Time Limit Exceeded</a></li><li><a href="#pitfall-5-heap-size-limit-exceeded" class="table-of-contents__link toc-highlight">Pitfall 5: Heap Size Limit Exceeded</a></li><li><a href="#pitfall-6-too-many-callouts" class="table-of-contents__link toc-highlight">Pitfall 6: Too Many Callouts</a></li></ul></li><li><a href="#-limits-by-transaction-type" class="table-of-contents__link toc-highlight">üìä Limits by Transaction Type</a><ul><li><a href="#synchronous-transactions" class="table-of-contents__link toc-highlight">Synchronous Transactions</a></li><li><a href="#asynchronous-transactions" class="table-of-contents__link toc-highlight">Asynchronous Transactions</a></li></ul></li><li><a href="#-checking-limits-programmatically" class="table-of-contents__link toc-highlight">üîç Checking Limits Programmatically</a><ul><li><a href="#limit-methods" class="table-of-contents__link toc-highlight">Limit Methods</a></li><li><a href="#practical-example---safe-query-execution" class="table-of-contents__link toc-highlight">Practical Example - Safe Query Execution</a></li></ul></li><li><a href="#-best-practices" class="table-of-contents__link toc-highlight">üéØ Best Practices</a><ul><li><a href="#1-bulkify-all-operations" class="table-of-contents__link toc-highlight">1. Bulkify All Operations</a></li><li><a href="#2-select-only-needed-fields" class="table-of-contents__link toc-highlight">2. Select Only Needed Fields</a></li><li><a href="#3-use-efficient-query-patterns" class="table-of-contents__link toc-highlight">3. Use Efficient Query Patterns</a></li><li><a href="#4-optimize-loops" class="table-of-contents__link toc-highlight">4. Optimize Loops</a></li><li><a href="#5-use-asynchronous-processing" class="table-of-contents__link toc-highlight">5. Use Asynchronous Processing</a></li><li><a href="#6-clear-large-objects" class="table-of-contents__link toc-highlight">6. Clear Large Objects</a></li><li><a href="#7-use-efficient-data-structures" class="table-of-contents__link toc-highlight">7. Use Efficient Data Structures</a></li></ul></li><li><a href="#-testing-governor-limits" class="table-of-contents__link toc-highlight">üß™ Testing Governor Limits</a><ul><li><a href="#test-limits-in-test-context" class="table-of-contents__link toc-highlight">Test Limits in Test Context</a></li><li><a href="#using-limitsgetlimitqueries" class="table-of-contents__link toc-highlight">Using Limits.getLimitQueries()</a></li></ul></li><li><a href="#-quick-reference-cheat-sheet" class="table-of-contents__link toc-highlight">üìã Quick Reference Cheat Sheet</a><ul><li><a href="#must-memorize-limits" class="table-of-contents__link toc-highlight">Must-Memorize Limits</a></li><li><a href="#limit-checking-methods" class="table-of-contents__link toc-highlight">Limit Checking Methods</a></li><li><a href="#common-anti-patterns" class="table-of-contents__link toc-highlight">Common Anti-Patterns</a></li><li><a href="#best-patterns" class="table-of-contents__link toc-highlight">Best Patterns</a></li></ul></li><li><a href="#-exam-scenarios" class="table-of-contents__link toc-highlight">üéì Exam Scenarios</a><ul><li><a href="#scenario-1-trigger-optimization" class="table-of-contents__link toc-highlight">Scenario 1: Trigger Optimization</a></li><li><a href="#scenario-2-cpu-time-optimization" class="table-of-contents__link toc-highlight">Scenario 2: CPU Time Optimization</a></li><li><a href="#scenario-3-callout-optimization" class="table-of-contents__link toc-highlight">Scenario 3: Callout Optimization</a></li></ul></li><li><a href="#-summary" class="table-of-contents__link toc-highlight">üìö Summary</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/learn-salesforce/docs/GETTING_STARTED">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/learn-salesforce/docs/QUICK_REFERENCE">Quick Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/learn-salesforce/docs/RESOURCES">Resources</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/salesforce" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/salesforcedevs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/learn-salesforce/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/lehoaibao130497/learn-salesforce" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2026 Salesforce Learning Journey. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>